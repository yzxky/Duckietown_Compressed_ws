
generate:
	@echo "$(sep)Automated files generation"
	@echo
	@echo 'Generation of documentation'
	@echo
	@echo '- `make generate-all`:              Generates everything.'
	@echo '- `make generate-help`:             Generates help.'
	@echo '- `make generate-easy_node`:        Generates the easy node documentation.'
	@echo '- `make generate-easy_node-clean`:  Cleans the generated files.'
	@echo
	@echo

generate-all: \
	generate-help\
	generate-easy_node

out_help=Makefiles/help.autogenerated.md

generate-help:
	echo > $(out_help)
	echo "\n\n<div id='makefiles-autogenerated' markdown='1'>\n\n" >> $(out_help)
	echo '## Makefile help {#makefiles-help}' >> $(out_help)
	$(MAKE) -s all >> $(out_help)
	echo "\n\n</div>\n\n" >> $(out_help)


generate-easy_node:
	rosrun easy_node generate_docs

generate-easy_node-clean:
	find . -name '*autogenerated.md' -delete

roster=~/duckuments/docs/.autogenerated-roster.md

generate-roster:
	rosrun duckieteam create-roster --roster $(roster)


fleet_stats=fleet.html
generate-fleet-statistics-frankfurt:
	rosrun what_the_duck what-the-duck-stats $(fleet_stats)
	cp $(fleet_stats) ~/public_html/fleet-fall2017.html

generate-fleet-statistics:
	rosrun what_the_duck what-the-duck-stats $(fleet_stats)
	rsync --progress $(fleet_stats) \
		duckietown@frankfurt.co-design.science:public_html/fleet-fall2017.html

generate-fleet-statistics-table:
	python -m what_the_duck.stats.output last_download.pickle $(fleet_stats)
